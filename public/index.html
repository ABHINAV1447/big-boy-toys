<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Big Boy Toys | Premium Auto Dealership</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Outfit:wght@300;400;500;700&display=swap"
        rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="style.css">

    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="logo">
            <span class="logo-text">BBT</span>
            <span class="logo-sub">Premium</span>
        </div>
        <ul class="nav-links">
            <li><a href="#home" class="active">Home</a></li>
            <li><a href="index.html#collection">Collection</a></li>
            <li><a href="service-centers.html">Services</a></li>
            <li><a href="careers.html">Careers</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
        <a href="signin.html" class="btn-primary">Sign In</a>
        <div class="mobile-toggle">
            <i data-lucide="menu"></i>
        </div>
    </nav>

    <!-- Hero Section -->
    <header id="home" class="hero">
        <div class="hero-bg">
            <!-- Placeholder for high-res car image -->
            <img src="https://images.unsplash.com/photo-1617788138017-80ad40651399?q=80&w=2670&auto=format&fit=crop"
                alt="Luxury Car Background" class="parallax-img">
            <div class="overlay"></div>
        </div>
        <div class="hero-content">
            <h1 class="glitch-text" data-text="DRIVE THE EXTRAORDINARY">DRIVE THE <span
                    class="accent">EXTRAORDINARY</span></h1>
            <p class="hero-sub">Experience the pinnacle of automotive engineering and luxury.</p>
            <div class="hero-btns">
                <a href="#collection" class="btn-primary">Explore Collection</a>
                <a href="contact.html?subject=test-drive" class="btn-secondary">Book Test Drive</a>
            </div>
        </div>
        <div class="scroll-indicator">
            <span>Scroll</span>
            <div class="line"></div>
        </div>
    </header>

    <!-- Collection Section (Bento Grid) -->
    <section id="collection" class="collection">
        <div class="section-header">
            <h2>The <span class="accent">Collection</span></h2>
            <p>Curated excellence. Choose your machine.</p>
        </div>

        <div class="bento-grid">
            <!-- Large Item -->
            <div class="bento-item large" data-tilt>
                <img src="https://images.unsplash.com/photo-1603584173870-7f23fdae1b7a?q=80&w=2669&auto=format&fit=crop"
                    alt="Super Sport">
                <div class="content">
                    <h3>Super Sport</h3>
                    <p>Unmatched Performance</p>
                    <a href="collection.html?category=super-sport" class="link-arrow">Explore Category -></a>
                </div>
            </div>

            <!-- Tall Item -->
            <div class="bento-item tall" data-tilt>
                <img src="https://images.unsplash.com/photo-1533473359331-0135ef1b58bf?q=80&w=2670&auto=format&fit=crop"
                    alt="Luxury SUV">
                <div class="content">
                    <h3>Luxury SUV</h3>
                    <p>Dominance meets Comfort</p>
                    <a href="collection.html?category=suv" class="link-arrow">Explore Category -></a>
                </div>
            </div>

            <!-- Medium Item -->
            <div class="bento-item medium" data-tilt>
                <img src="https://images.unsplash.com/photo-1617788138017-80ad40651399?q=80&w=2670&auto=format&fit=crop"
                    alt="Electric Future">
                <div class="content">
                    <h3>Electric Future</h3>
                    <p>Silent Power</p>
                    <a href="collection.html?category=electric" class="link-arrow">Explore Category -></a>
                </div>
            </div>

            <!-- Medium Item -->
            <div class="bento-item medium" data-tilt>
                <img src="https://images.unsplash.com/photo-1583121274602-3e2820c69888?q=80&w=2670&auto=format&fit=crop"
                    alt="Classic Icons">
                <div class="content">
                    <h3>Classic Icons</h3>
                    <p>Timeless Elegance</p>
                    <a href="collection.html?category=classic" class="link-arrow">Explore Category -></a>
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="services">
        <div class="container">
            <div class="service-card">
                <i data-lucide="wrench" class="icon"></i>
                <h3>Expert Diagnostics</h3>
                <p>State-of-the-art facility for maintaining your machine.</p>
            </div>
            <div class="service-card">
                <i data-lucide="calendar" class="icon"></i>
                <h3>Private Booking</h3>
                <p>Schedule a private viewing at your convenience.</p>
            </div>
            <div class="service-card">
                <i data-lucide="shield-check" class="icon"></i>
                <h3>Certified Warranty</h3>
                <p>Peace of mind with our comprehensive coverage.</p>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section id="testimonials" class="testimonials"
        style="padding: 4rem 0; background: rgba(5,5,5,1); border-top: 1px solid var(--glass-border);">
        <div class="container">
            <div class="section-header" style="text-align: center; margin-bottom: 3rem;">
                <h2>Client <span class="accent">Testimonials</span></h2>
                <p>What our exclusive clientele has to say.</p>
            </div>
            <div class="testimonials-grid" id="testimonials-container"
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                <p style="text-align: center; color: var(--text-secondary); grid-column: 1/-1;">Loading testimonials...
                </p>
            </div>
            <div style="text-align: center; margin-top: 3rem; display: none;" id="view-all-reviews-wrapper">
                <button id="view-all-reviews-btn" class="btn-secondary">View All Reviews</button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="brand">
                <h2>BBT</h2>
                <p>Redefining the luxury car buying experience.</p>
            </div>
            <div class="socials">
                <a href="#">Instagram</a>
                <a href="#">Twitter</a>
                <a href="#">LinkedIn</a>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2026 Big Boy Toys. All rights reserved.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="script.js"></script>
    <script>
        lucide.createIcons();

        // Fetch and display Testimonials
        document.addEventListener('DOMContentLoaded', async () => {
            const container = document.getElementById('testimonials-container');
            const viewAllBtnWrapper = document.getElementById('view-all-reviews-wrapper');
            const viewAllBtn = document.getElementById('view-all-reviews-btn');
            if (!container) return;

            try {
                const response = await fetch('/api/testimonials');
                const data = await response.json();

                if (data.success && data.testimonials && data.testimonials.length > 0) {
                    container.innerHTML = '';
                    const allTestimonials = data.testimonials;
                    let displayedCount = 0;

                    const renderReviews = (count) => {
                        const reviewsToShow = allTestimonials.slice(displayedCount, displayedCount + count);
                        reviewsToShow.forEach(review => {
                            const stars = '★'.repeat(review.rating) + '☆'.repeat(5 - review.rating);
                            const card = document.createElement('div');
                            card.style.cssText = 'background: rgba(255,255,255,0.03); border: 1px solid var(--glass-border); border-radius: 12px; padding: 2rem; display: flex; flex-direction: column;';

                            const avatarHtml = review.avatar ? `<img src="${review.avatar}" alt="${review.author}" style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover; margin-right: 15px; border: 2px solid var(--accent-primary);">` : `<div style="width: 50px; height: 50px; border-radius: 50%; background: var(--accent-primary); display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 15px; font-family: 'Orbitron';">${review.author.charAt(0)}</div>`;

                            card.innerHTML = `
                                <div style="color: var(--accent-primary); font-size: 1.2rem; margin-bottom: 1rem;">${stars}</div>
                                <p style="color: var(--text-primary); font-style: italic; margin-bottom: 1.5rem; line-height: 1.6; flex-grow: 1;">"${review.text}"</p>
                                <div style="display: flex; align-items: center; margin-top: auto;">
                                    ${avatarHtml}
                                    <div style="font-family: 'Orbitron'; font-weight: bold;">${review.author}</div>
                                </div>
                            `;
                            container.appendChild(card);
                        });
                        displayedCount += reviewsToShow.length;

                        if (displayedCount >= allTestimonials.length) {
                            viewAllBtnWrapper.style.display = 'none';
                        } else {
                            viewAllBtnWrapper.style.display = 'block';
                        }
                    };

                    // Initial render of up to 3 reviews
                    renderReviews(3);

                    viewAllBtn.addEventListener('click', () => {
                        renderReviews(allTestimonials.length); // Show the rest
                    });

                } else {
                    container.innerHTML = '<p style="text-align: center; color: var(--text-secondary); grid-column: 1/-1;">No testimonials found.</p>';
                }
            } catch (error) {
                console.error('Error fetching testimonials:', error);
                container.innerHTML = '<p style="text-align: center; color: #ff4444; grid-column: 1/-1;">Unable to load testimonials at this time.</p>';
            }
        });
    </script>
</body>

</html>